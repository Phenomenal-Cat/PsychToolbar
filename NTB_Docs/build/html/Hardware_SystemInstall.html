
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>System Installation &#8212; NIF Toolbar</title>
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/css/nif.css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Photometer" href="Hardware_Photometer.html" />
    <link rel="prev" title="NTB Hardware" href="NTB_Hardware.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="Hardware_Photometer.html" title="Photometer"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="NTB_Hardware.html" title="NTB Hardware"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="NIF-Toolbar.html">NIF Toolbar</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="NTB_Hardware.html" accesskey="U">NTB Hardware</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">System Installation</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="system-installation">
<span id="systeminstall"></span><h1>System Installation<a class="headerlink" href="#system-installation" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>NIF users <strong>should not make changes to any computer system</strong> in the NIF without the permission and direct supervision of a member of the NIF support team! The NIF is a shared resource and any changes made to these systems will affect all NIF users research.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you encounter issues that you believe to be related to system updates or changes, please contact NIF support so that we can help to resolve the problem for all users.</p>
</div>
<p>The following instructions describe the process for setting up the standard configuration used in the NIF and SCNI for DataPixx stimulus presentation PCs. The specific hardware and software selections have been driven primarily by the recommendations of
VPixx and Mario Kleiner at PsychToolbox. NIF Toolbar’s default settings expect this type of setup, but can be configured to operate in alternative environments (e.g. other OSs, and with more or fewer displays).</p>
<p>For this purpose, we typically order high-specification custom workstation PCs in rack mount chassis, from companies like ADEK. It is recommended to request at the time of order that the system should be a Windows - Ubuntu dual boot, and that we will be running power-hungry GPUs (so that the supplier can provide an appropriately rated power supply).</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#ubuntu-installation" id="id1">Ubuntu Installation</a></p>
<ul>
<li><p><a class="reference internal" href="#install-aptitude-and-update-all-packages" id="id2">Install aptitude and update all packages</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#install-nvidia-drivers-for-gtx-1080" id="id3">Install NVIDIA drivers for GTX 1080</a></p>
<ul>
<li><p><a class="reference internal" href="#install-neurodebian" id="id4">Install NeuroDebian</a></p></li>
<li><p><a class="reference internal" href="#install-blender" id="id5">Install Blender</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#install-gnu-octave-psychtoolbox" id="id6">Install GNU Octave &amp; PsychToolbox</a></p>
<ul>
<li><p><a class="reference internal" href="#install-matlab-psychtoolbox" id="id7">Install Matlab &amp; PsychToolbox</a></p></li>
<li><p><a class="reference internal" href="#install-datapixx-tools" id="id8">Install DataPixx Tools</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#setup-nvidia-x-screens" id="id9">Setup NVIDIA X-Screens</a></p></li>
</ul>
</div>
<div class="section" id="ubuntu-installation">
<h2><a class="toc-backref" href="#id1">Ubuntu Installation</a><a class="headerlink" href="#ubuntu-installation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Download Ubuntu 16.04 DVD ISO from http://ubuntu.com</strong> and burn a
copy, or borrow a burned DVD from NIF.</p></li>
<li><p><strong>Power on ADEK PC</strong>, open drive, insert Ubuntu 16.04 DVD.</p></li>
<li><p><strong>Boot Ubuntu Installer</strong>. If you don’t see the Ubuntu Installer on
PC boot:</p></li>
</ul>
<div class="section" id="install-aptitude-and-update-all-packages">
<h3><a class="toc-backref" href="#id2">Install aptitude and update all packages</a><a class="headerlink" href="#install-aptitude-and-update-all-packages" title="Permalink to this headline">¶</a></h3>
<p>Aptitude is a friendlier apt-get, use either based on your preference.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">aptitude</span>
<span class="n">sudo</span> <span class="n">aptitude</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">aptitude</span> <span class="n">upgrade</span> <span class="o">-</span><span class="n">y</span>
<span class="n">sudo</span> <span class="n">aptitude</span> <span class="n">install</span> <span class="n">build</span><span class="o">-</span><span class="n">essential</span>
<span class="n">sudo</span> <span class="n">reboot</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="install-nvidia-drivers-for-gtx-1080">
<h2><a class="toc-backref" href="#id3">Install NVIDIA drivers for GTX 1080</a><a class="headerlink" href="#install-nvidia-drivers-for-gtx-1080" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Logged in as <cite>nifsupport</cite>, download the appropriate <a class="reference external" href="http://.www.nvidia.com/Download/index.aspx">NVidia drivers</a> and save to the nifsupport <cite>downloads</cite> directory.</p></li>
<li><p>Restart the PC and at the GRUB screen, select ‘Ubuntu Advanced’</p></li>
<li><p>From the log in screen, hit ‘Ctrl + Alt + F2’ to get to a command
line</p></li>
<li><p>Log in as Root (‘Root’ plus nifsupport password)</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">service</span> <span class="n">lightdm</span> <span class="n">stop</span>
<span class="n">cd</span> <span class="o">/</span><span class="n">nif</span><span class="o">-</span><span class="n">admin</span><span class="o">/</span><span class="n">downloads</span>
<span class="o">./</span><span class="n">NVIDIA</span><span class="o">-</span><span class="n">XXX</span><span class="o">...</span>
</pre></div>
</div>
<ul>
<li><p>Accept the various terms and conditions of the NVidia driver
installation process</p></li>
<li><p>When the installer is finished type:</p>
<p>service lightdm start</p>
</li>
<li><p>Login as lab, use the Ubuntu search function to open the NVidia X
Server Settings (and pin to dock)</p></li>
<li><p>The following instructions are adapted from this blog post:
<a class="reference external" href="http://abhay.harpale.net/blog/linux/nvidia-gtx-1080-installation-on-ubuntu-16-04-lts/">http://abhay.harpale.net/blog/linux/nvidia-gtx-1080-installation-on-ubuntu-16-04-lts/</a></p></li>
<li><p>With graphics card model number in hand, head over to
<a class="reference external" href="http://www.nvidia.com/Download/index.aspx">Nvidia</a> and download &amp; install the
appropriate driver.</p></li>
<li><p>The NIF’s primary DATAPixx PC was setup by VPixx to run dual boot
Ubuntu 16.04 and Windows 7 and has the NVIDIA drivers correctly
installed for the NVIDIA GTX 1060 card. The specific drivers
installed on that machine are shown in the screenshot below.</p></li>
</ul>
<div class="figure align-right" style="width: 40%">
<a class="reference internal image-reference" href="_images/NVidia_Drivers.png"><img alt="_images/NVidia_Drivers.png" src="_images/NVidia_Drivers.png" style="width: 100%;" /></a>
</div>
<div class="section" id="install-neurodebian">
<h3><a class="toc-backref" href="#id4">Install NeuroDebian</a><a class="headerlink" href="#install-neurodebian" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wget</span> <span class="o">-</span><span class="n">O</span><span class="o">-</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">neuro</span><span class="o">.</span><span class="n">debian</span><span class="o">.</span><span class="n">net</span><span class="o">/</span><span class="n">lists</span><span class="o">/</span><span class="n">xenial</span><span class="o">.</span><span class="n">us</span><span class="o">-</span><span class="n">nh</span><span class="o">.</span><span class="n">full</span> <span class="o">|</span> <span class="n">sudo</span> <span class="n">tee</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">apt</span><span class="o">/</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span><span class="o">.</span><span class="n">d</span><span class="o">/</span><span class="n">neurodebian</span><span class="o">.</span><span class="n">sources</span><span class="o">.</span><span class="n">list</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">key</span> <span class="n">adv</span> <span class="o">--</span><span class="n">recv</span><span class="o">-</span><span class="n">keys</span> <span class="o">--</span><span class="n">keyserver</span> <span class="n">hkp</span><span class="p">:</span><span class="o">//</span><span class="n">pool</span><span class="o">.</span><span class="n">sks</span><span class="o">-</span><span class="n">keyservers</span><span class="o">.</span><span class="n">net</span><span class="p">:</span><span class="mi">80</span> <span class="mh">0xA5D32F012649A5A9</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
</pre></div>
</div>
</div>
<div class="section" id="install-blender">
<h3><a class="toc-backref" href="#id5">Install Blender</a><a class="headerlink" href="#install-blender" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="n">ppa</span><span class="p">:</span><span class="n">thomas</span><span class="o">-</span><span class="n">schiex</span><span class="o">/</span><span class="n">blender</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">blender</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="install-gnu-octave-psychtoolbox">
<h2><a class="toc-backref" href="#id6">Install GNU Octave &amp; PsychToolbox</a><a class="headerlink" href="#install-gnu-octave-psychtoolbox" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">add</span><span class="o">-</span><span class="n">apt</span><span class="o">-</span><span class="n">repository</span> <span class="n">ppa</span><span class="p">:</span><span class="n">octave</span><span class="o">/</span><span class="n">stable</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">update</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">octave</span>
<span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">octave</span><span class="o">-</span><span class="n">psychtoolbox</span><span class="o">-</span><span class="mi">3</span>
</pre></div>
</div>
<div class="section" id="install-matlab-psychtoolbox">
<h3><a class="toc-backref" href="#id7">Install Matlab &amp; PsychToolbox</a><a class="headerlink" href="#install-matlab-psychtoolbox" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Login to the Mathworks account linked to your NIH e-mail address:
<a class="reference external" href="https://www.mathworks.com/login">https://www.mathworks.com/login</a></p></li>
<li><p>Download, install and activate MATLAB using your account.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span><span class="o">-</span><span class="n">get</span> <span class="n">install</span> <span class="n">matlab</span><span class="o">-</span><span class="n">psychtoolbox</span><span class="o">-</span><span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="section" id="install-datapixx-tools">
<h3><a class="toc-backref" href="#id8">Install DataPixx Tools</a><a class="headerlink" href="#install-datapixx-tools" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Copy the Datapixx mex file for 64-bit Linux, (e.g.
<code class="docutils literal notranslate"><span class="pre">/projects/SCNI/Software/VPixx_Software_Tools/DatapixxToolbox_trunk/mexdev/build/matlab/linux64/Datapixx.mexa64</span></code>)</p>
<blockquote>
<div><p>to the PsychBasic folder of your matlab installation (e.g.:
<code class="docutils literal notranslate"><span class="pre">/usr/share/psychtoolbox-3/PsychBasic</span></code>)</p>
</div></blockquote>
</li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">mv</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">lab</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="n">Datapixx</span><span class="o">.</span><span class="n">mexa64</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">share</span><span class="o">/</span><span class="n">psychtoolbox</span><span class="o">-</span><span class="mi">3</span><span class="o">/</span><span class="n">PsychBasic</span>
</pre></div>
</div>
<ul class="simple">
<li><p>In order to run Datapixx functions without running Matlab or Octave
as root user (i.e., without need for root login or the sudo command):</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">cp</span> <span class="n">Psychtoolbox</span><span class="o">/</span><span class="n">PsychHardware</span><span class="o">/</span><span class="n">DatapixxToolbox</span><span class="o">/</span><span class="mi">60</span><span class="o">-</span><span class="n">vpixx</span><span class="o">-</span><span class="n">permissions</span><span class="o">.</span><span class="n">rules</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">udev</span><span class="o">/</span><span class="n">rules</span><span class="o">.</span><span class="n">d</span><span class="o">/</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Connect to NIF storage again and copy
<code class="docutils literal notranslate"><span class="pre">/Volumes/LIBRARY/software/VPixx_Software_Tools.zip</span></code> to
<code class="docutils literal notranslate"><span class="pre">~lab/Downloads</span></code>.</p></li>
<li><p>Unzip VPixx<em>Software</em>Tools.zip</p></li>
<li><p>Add
<cite>/home/lab/Downloads/VPixx_Software_Tools/DatapixxToolbox_trunk/</cite>
to MATLAB’s path.</p></li>
</ul>
</div>
</div>
<div class="section" id="setup-nvidia-x-screens">
<span id="setupnvidiaxscreens"></span><h2><a class="toc-backref" href="#id9">Setup NVIDIA X-Screens</a><a class="headerlink" href="#setup-nvidia-x-screens" title="Permalink to this headline">¶</a></h2>
<div class="figure align-right" style="width: 40%">
<a class="reference internal image-reference" href="_images/NVidia_settings1.png"><img alt="_images/NVidia_settings1.png" src="_images/NVidia_settings1.png" style="width: 100%;" /></a>
</div>
<ul class="simple">
<li><p>Connect displays (or matrix switch inputs) to 3 of the display port
outputs on the NVIDIA GTX 1080 card</p></li>
<li><p>In Ubuntu, open the <strong>NVIDIA XServer Settings</strong> manager and select
<strong>XServer display configuration</strong></p></li>
<li><p>Click and drag to arrange your displays from left to right: 1) Matlab
command line 2) Experimenter display 3) Monkey display</p></li>
<li><p>Select display 2, click the drop down menu next to <code class="docutils literal notranslate"><span class="pre">Configuration</span></code>
and select <code class="docutils literal notranslate"><span class="pre">Add</span> <span class="pre">new</span> <span class="pre">Xscreen</span></code></p></li>
</ul>
<div class="figure align-right" style="width: 40%">
<a class="reference internal image-reference" href="_images/NVidia_settings2.png"><img alt="_images/NVidia_settings2.png" src="_images/NVidia_settings2.png" style="width: 100%;" /></a>
</div>
<ul class="simple">
<li><p>Set display 1 to use Xscreen 0 and displays 2 and 3 to use Xscreen 1</p></li>
<li><p>Click the <strong>Save to X Configuration File</strong> button</p></li>
<li><p>You will be propted to overwrite the existing file. Accept.</p></li>
<li><p>After reboot, the new settings will take effect. The experimenter
display and monkey display will now remain black after logon. Content
will only appear on these screens when we tell Matlab to open a
PsychToolbox window on Xscreen 1. Both the experimenter and monkey
displays are treated as a single extended window (7680 x 2160 pixels)</p></li>
</ul>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="NIF-Toolbar.html">
              <img class="logo" src="_static/NTB Logo w.png" alt="Logo"/>
            </a></p>
<h3><a href="NIF-Toolbar.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="NTB_SessionPanel.html">NTB Session Panel</a></li>
<li class="toctree-l1"><a class="reference internal" href="NTB_ActionsTab.html">NTB Actions Tab</a></li>
<li class="toctree-l1"><a class="reference internal" href="NTB_SettingsTab.html">NTB Settings Tab</a></li>
<li class="toctree-l1"><a class="reference internal" href="NTB_CalibrationsTab.html">NTB Calibrations Tab</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="NTB_Hardware.html">NTB Hardware</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Setup - System Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hardware_Photometer.html">Setup - Luminance Measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hardware_DatapixxInterface.html">Hardware - Interface Box</a></li>
<li class="toctree-l2"><a class="reference internal" href="Hardware_Photodiode.html">Hardware - Photodiodes</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="NTB_Hardware.html"
                        title="previous chapter">NTB Hardware</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Hardware_Photometer.html"
                        title="next chapter"> Photometer</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="Hardware_Photometer.html" title="Photometer"
             >next</a> |</li>
        <li class="right" >
          <a href="NTB_Hardware.html" title="NTB Hardware"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="NIF-Toolbar.html">NIF Toolbar</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="NTB_Hardware.html" >NTB Hardware</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">System Installation</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Aidan P. Murphy, Ph.D.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>